数据库控制：


		1.数据库管理系统DBMS允许的基本工作单位是 “事务”

		2.事务是用户定义的一个数据库操作序列，这些操作列要么全做，要么全不做，是一个不可分割的工作单位

		3.事务具有以下特性（ACID特性）：
							(1)原子性（atomicity）：
												要么全做，要么全不做

							(2)一致性（consistency）：
												事务的执行一定会使数据库从一个一致的状态变为另一
												个一致的状态，状态保持一致

							(3)隔离性（isolation）：
												事务执行过程不能被干扰、打断

							(4)持续性（durability，永久性）：
												事务提交后，对数据库的影响、改变是长久的



		4.事务通常以 “BEGIN TRANSACTION” （事务开始）语句开始，以 “COMMIT” 或 “ROLLBACK” 结束

				COMMIT：事务提交，表示事务执行成功地结束
				ROLLBACK：事务回滚，表示事务执行不成功地结束，把对数据的修改进行恢复






		5.并发控制：
				在多用户共享系统中，许多事务可能同时对同一数据进行操作，称为 “并发操作”
				此时数据管理系统的 “并发控制子系统” 负责协调并发事务的执行，保证数据库的完整性不受
				破坏，同时避免用户得到不正确的数据

				(1)并发操作的问题（数据库并发操作可能带来的问题）：
					a.丢失更新的问题
					b.不一致分析问题（读过时的数据）
					c.依赖于未提交更新的问题（读脏数据）

					————解决：采用加锁技术

				(2)有两种类型的锁：
					a.X型锁（排他锁）：
								如果事务T对数据A（可以是数据项、记录、数据集以至z整个数据库）实现
								了X型封锁，那么只允许事务T “读取” 和 “修改” 数据A，其他事务要等
								事务T接触X型锁后，才能对数据A实现任何类型的封锁，可见X型锁只允许
								一个事务独锁某个数据，具有排他性

								缺点：效率低


					b.S型锁（共享锁）：
								（效率相对较高）
								S型锁允许并发 “读”，但不允许 “修改”，即如果事务T对数据A实现了S型
								封锁，那么允许事务T “读取” 数据A，但不能 “修改” 数据A，在所有S封
								锁解除之前，绝不允许任何事务对数据A实现X型封锁





		6.备份与恢复技术：
				(1)数据备份：
							指为防止系统出现操作失误或系统故障而导致数据丢失，而将全部或部分数据集
							合从应用主机的硬盘、阵列复制到其他的存储介质的过程

							数据库只能恢复到备份时的状态，从那以后的所有更新事务必须重新运行才能恢
							复到故障时的状态

							备份的类型：
									a.冷备份（静态备份）：
											指在数据库正常关闭的情况下（服务停止，数据库停止运
											作）备份，所有备份过程中不允许对数据库进行任何存取、
											修改活动

											缺点：
												1.单独使用时，只能提供到 “某一时间点” 上的恢复
												  (什么时候备份的，只能恢复到那个时候)
												2.在备份时，数据库不能做其他工作
												3.若磁盘有限，只能将备份数据拷贝到磁带等外部存储
												  设备上，速度会比较慢
												4.不能按表或按用户恢复
												 （要恢复就只能全部恢复）

									b.热备份（动态备份）：
											指备份期间允许对数据库进行存取、修改，即备份和用户事
											务可以并发执行

											优点：
												1.可在表空间或数据库文件级备份，备份的时间短
												 （即可以选择哪些表、数据库文件备份，按需要来）
												2.备份时数据仍可使用
												3.可对几乎所有数据库实体做恢复
												4.恢复是快速的，可在数据库工作时恢复

											缺点：
												1.不能出错，否则后果严重
												2.若热备份不成功，所得结果不可用于时间点的恢复
												3.困难于维护，所以要特别仔细小心，不允许失败


							按备份的程度分类：
									a.完全备份：
										备份全部文件，并不依赖文件的存档属性来确定备份哪些文件

									b.差分备份：
										备份自上一次 “完全备份” 以来变化过的文件

									c.增量备份：
										备份上一次 “备份后（无论哪种备份）”，所有发送变化的文件



				(2)日志文件：
						（数据恢复光有备份还不够，还要有日志文件）

						事务日志是针对数据库改变（delete、update等）所做的记录，记录对数据库的任
						何操作，并将记录结果保存在单独的一个文件中

						在热备份中， 必须建立日志文件，备份副本和日志文件综合起来才能有效地恢复数据库

						在冷备份中，也可以建立日志文件，当数据库毁坏后可重新装入后援副本把数据库恢
						复到备份结束时刻的正确状态，然后利用日志文件，把已完成的事务进行重做处理，
						对故障发生尚未完成的事务进行撤销处理

						原则：要求遵循 “先写日志文件，然后再写数据库的修改”
							（若先做数据库修改的话，修改过程中发生错误了，日志没写，那么这个修改就
							  看不到了，恢复的时候就无法恢复这一块了）




				(3)数据恢复：
						（数据恢复就依赖于前面的备份文件、日志文件）

						把数据库从错误状态恢复到某一个已知的正确状态的功能

						数据库恢复的基本原理就是冗余，建立冗余的方法有数据库备份、登录日志文件等